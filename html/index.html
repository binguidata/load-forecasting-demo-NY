
  <!DOCTYPE html>
<html>
<head>
	<title>Electricity Load Forecasting Demo</title>
	<link rel="stylesheet" type="text/css" href="/static/css/semantic.css">
	<link rel="stylesheet" type="text/css" href="/static/css/style.css">
	<link rel="stylesheet" href="/static/css/monokai-sublime.css ">
</head>
<body>
	<div class="ui container">
		
<div class="ui raised container basic segment">
  <h1 class="ui header">Electricity Load Forecasting Demo</h1>
  <span>Predicts the electricity load of the New York city based on the historical load and weather patterns.</span>
</div>

<div class="ui raised container basic segment">
    
<div class="ui raised container segment" style="margin-bottom: 30px;">
  <div class="ui stackable grid">
    <div class="eight wide column">
      <div class="ui centered grid">
            <img class="ui fluid image" style="padding: 0px;" src="/static/images/ny-map.jpg">
      </div>
    </div>
    <div class="eight wide column output">
      <h3 class="ui header">Load Forecast</h3>
            <img class="ui fluid image" style="padding: 0px;" src="/static/images/load-prediction.png">      
    </div>
  </div>  
</div>

	<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	<script src="/static/js/semantic.min.js"></script>
	<script src="/static/js/style.js"></script>
	<script src="/static/js/roro.js"></script>


<script type="text/javascript">
$(function() {
  function process_data(data) {
    $('.output').removeClass("ui loading basic segment");
    $(".output table tbody").html("");

    function process_value(value) {
      if (typeof(value) == "object") 
        return JSON.stringify(value);
      else
        return value;
    }

    // when data is an object instead of an array
    // convert it into an array of {"key": k, "value": v} objects
    if (!$.isArray(data) && typeof(data) == "object") {
      var data2 = [];
      for (var k in data) {
        data2[data2.length] = {"key": k, "value": process_value(data[k])}
      }
      data = data2;
    }

    $.each(data, function(i, row) {
      var keys = ["label", "probability"];

      var tr = $(".output table tbody").append("<tr>").find("tr:last");

      for (var i in keys) {
        var key = keys[i];
        tr.append("<td>").find("td:last").append(make_cell(row[key]));
      }
    });
  }

  function make_cell(value) {
    var e = $("<span>");
    if (typeof(value) == "number") {
      e = e.addClass("cell-number").html(value.toFixed(2));
    }
    else if (typeof(value) == "string") {
      e = e.addClass("cell-string").html(value);
    }
    else {
      e = e.addClass("cell-object").html(value);
    }
    return e;
  }

  $('.input-img a img').click(function(){
    $('.output-img img').attr('src', this.src);
    $('.output').addClass("ui loading basic segment");

    // Clear border in old selection
    $(this).parent().parent().siblings().each(function(){
      $(this).children().removeClass("bordered");
    });

    // Add border to current selection
    $(this).parent().addClass("bordered");

    var args = {
        "image": {
          "url": this.src
        }
    };

    // if the current hostname is foo.rorocloud.io,
    // then the API host will be foo--api.rorocloud.io
    var api_host = document.location.host.replace(".", "--api.");
    var api = roro.client(api_host);
    api.invoke("predict", args, process_data);
  });
});
</script>


</body>
</html>
